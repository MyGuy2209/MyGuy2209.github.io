<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <style>


        #pic {
            height:32px;
            width: 10px;
        }
    </style>
</head>
<body>

<main>

<div>
   <canvas id="canvas" height="clientHeight"  width="clientWidth" >



   </canvas>




















</main>
<script>





    let context, controller, loop;

    context = document.querySelector("canvas").getContext("2d");
    const canvas = document.getElementById("canvas");

    context.canvas.height = window.innerHeight - 25;
    context.canvas.width = window.innerWidth - 25;



    let img = new Image();
    img.src= "Bilder/walkanimation.gif";


    var background = new Image();







     rectangle = {

        height:32,
        jumping:true,
        width:32,
        x:100,
        x_velocity:0,
        y:0,
        y_velocity:0,







    };


    controller = {

        left:false,
        right:false,
        up:false,
        keyListener:function(event) {

            var key_state = (event.type == "keydown")?true:false;

            switch(event.keyCode) {

                case 37:// left key
                    controller.left = key_state;
                    break;
                case 38:// up key
                    controller.up = key_state;
                    break;
                case 39:// right key
                    controller.right = key_state;
                    break;

            }

        }

    };

    loop = function() {

        if (controller.up && rectangle.jumping == false) {

            rectangle.y_velocity -= 20;
            rectangle.jumping = true;

        }

        if (controller.left) {

            rectangle.x_velocity -= 1.0;

        }

        if (controller.right) {

            rectangle.x_velocity += 1.0;

        }

        rectangle.y_velocity += 1.0;
        rectangle.x += rectangle.x_velocity;
        rectangle.y += rectangle.y_velocity;
        rectangle.x_velocity *=  0.9;
        rectangle.y_velocity *= 0.9;


        if (rectangle.y > 515 -16 - 32) {

            rectangle.jumping = false;
            rectangle.y = 515 - 16 - 32;
            rectangle.y_velocity = 0;

        }


        if (rectangle.x < - window.innerWidth - 25) {

            rectangle.x = window.innerWidth - 25;

        } else if (rectangle.x > window.innerWidth - 25) {

            rectangle.x = -window.innerWidth -25 ;

        }


        context.fillStyle = "#202020";
        context.fillRect(0, 0, window.innerWidth, window.innerHeight);
        context.beginPath();
        context.save();
        context.rect(rectangle.x , rectangle.y, rectangle.width, rectangle.height, );
        context.drawImage(img, rectangle.x, rectangle.y);
        context.clip();
        context.restore();
        context.fillStyle  = "#202020";
        context.fill();
        context.strokeStyle= "black";
        context.lineWidth = 25;
        context.beginPath();
        context.moveTo(0,  620);
        context.lineTo(window.innerWidth, 620);
        context.stroke();




        window.requestAnimationFrame(loop);


    };




    window.addEventListener("keydown", controller.keyListener);
    window.addEventListener("keyup", controller.keyListener);
    window.requestAnimationFrame(loop);
</script>
</body>
</html>